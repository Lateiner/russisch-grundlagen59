<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bild-Wort-Trainer: Russische Adjektive im Dativ</title>
    <script src="https://cdn.jsdelivr.net/npm/drag-drop-touch@1.3.1/DragDropTouch.js"></script>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --success: #27ae60;
            --error: #e74c3c;
            --bg: #f4f7f9;
            --card: #ffffff;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg);
            color: var(--primary);
            margin: 0;
            padding: 10px;
            display: flex;
            justify-content: center;
        }

        .container {
            width: 100%;
            max-width: 850px;
            background: var(--card);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        header {
            text-align: center;
            border-bottom: 3px solid var(--secondary);
            margin-bottom: 25px;
            padding-bottom: 10px;
        }

        .instruction {
            background: #eef2f7;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 25px;
            border-left: 5px solid var(--secondary);
            font-size: 0.95rem;
        }

        .exercise-card {
            background: #fff;
            border: 2px solid #eaeeef;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            text-align: center;
        }

        .visual-prompt {
            font-size: 4rem;
            margin-bottom: 10px;
            display: block;
        }

        .target-desc {
            color: #7f8c8d;
            font-style: italic;
            margin-bottom: 15px;
            display: block;
        }

        .sentence-display {
            font-size: 1.2rem;
            margin-bottom: 20px;
            min-height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
            flex-wrap: wrap;
        }

        .drop-slot {
            min-width: 100px;
            border-bottom: 2px solid #bdc3c7;
            padding: 2px 10px;
            color: var(--secondary);
            font-weight: bold;
            cursor: pointer;
        }

        .drop-slot:empty::before {
            content: "_______";
            color: #ccc;
        }

        .drop-slot.correct { color: var(--success); border-bottom-color: var(--success); }
        .drop-slot.incorrect { color: var(--error); border-bottom-color: var(--error); }

        .chip-pool {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .chip {
            padding: 8px 15px;
            background: var(--primary);
            color: white;
            border-radius: 6px;
            cursor: pointer;
            user-select: none;
            transition: all 0.2s;
            font-size: 1rem;
        }

        .chip:hover { filter: brightness(1.2); }
        .chip.used { opacity: 0.3; pointer-events: none; }

        .btn-group {
            display: flex;
            gap: 10px;
        }

        button {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            transition: opacity 0.2s;
        }

        .btn-reset { background: #95a5a6; color: white; }
        .btn-sol { background: var(--secondary); color: white; }

        @media (max-width: 600px) {
            .container { padding: 15px; }
            .sentence-display { font-size: 1.1rem; }
            .chip { font-size: 0.9rem; }
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Russisch-Assistent</h1>
        <h2>Bild-Satz-Zuordnung (Dativ)</h2>
    </header>

    <div class="instruction">
        <strong>Anleitung:</strong> Schau dir das Bild an und vervollst√§ndige den Satz mit der Pr√§position <strong>–∫</strong>.
        <br>1. Klicke auf die <strong>Wort-Chips</strong>, um die L√ºcken zu f√ºllen.
        <br>2. Ein Klick auf ein Wort im Satz schickt es zur√ºck.
    </div>

    <div id="exercise-list"></div>
</div>

<script>
    const exercises = [
        { id: 1, icon: "üè†üî¥", desc: "rotes Haus", start: "–û–Ω –∏–¥—ë—Ç –∫", ans: ["–∫—Ä–∞—Å–Ω–æ–º—É", "–¥–æ–º—É"], pool: ["–∫—Ä–∞—Å–Ω–æ–º—É", "–∫—Ä–∞—Å–Ω–∞—è", "–¥–æ–º—É", "–¥–æ–º–∞"] },
        { id: 2, icon: "üè•üîµ", desc: "blaue Klinik", start: "–û–Ω–∞ –∏–¥—ë—Ç –∫", ans: ["—Å–∏–Ω–µ–π", "–∫–ª–∏–Ω–∏–∫–µ"], pool: ["—Å–∏–Ω–µ–π", "—Å–∏–Ω—é—é", "–∫–ª–∏–Ω–∏–∫–µ", "–∫–ª–∏–Ω–∏–∫—É"] },
        { id: 3, icon: "ü§ùüë¥", desc: "alter Freund", start: "–Ø –∏–¥—É –∫", ans: ["—Å—Ç–∞—Ä–æ–º—É", "–¥—Ä—É–≥—É"], pool: ["—Å—Ç–∞—Ä–æ–º—É", "—Å—Ç–∞—Ä—ã–π", "–¥—Ä—É–≥—É", "–¥—Ä—É–≥–∞"] },
        { id: 4, icon: "üè´üè¢", desc: "neue Schule", start: "–î–µ—Ç–∏ –∏–¥—É—Ç –∫", ans: ["–Ω–æ–≤–æ–π", "—à–∫–æ–ª–µ"], pool: ["–Ω–æ–≤–æ–π", "–Ω–æ–≤–∞—è", "—à–∫–æ–ª–µ", "—à–∫–æ–ª—É"] },
        { id: 5, icon: "üåäüèôÔ∏è", desc: "blaues Meer", start: "–ú—ã –ø–æ–¥–æ—à–ª–∏ –∫", ans: ["—Å–∏–Ω–µ–º—É", "–º–æ—Ä—é"], pool: ["—Å–∏–Ω–µ–º—É", "—Å–∏–Ω–µ–µ", "–º–æ—Ä—é", "–º–æ—Ä—è"] },
        { id: 6, icon: "üë®‚Äçüè´üìñ", desc: "unser Lehrer", start: "–°—Ç—É–¥–µ–Ω—Ç –ø–æ–¥–æ—à—ë–ª –∫", ans: ["–Ω–∞—à–µ–º—É", "—É—á–∏—Ç–µ–ª—é"], pool: ["–Ω–∞—à–µ–º—É", "–Ω–∞—à", "—É—á–∏—Ç–µ–ª—é", "—É—á–∏—Ç–µ–ª—è"] },
        { id: 7, icon: "üå≥üè°", desc: "nachbarliches Haus", start: "–û–Ω –∏–¥—ë—Ç –∫", ans: ["—Å–æ—Å–µ–¥–Ω–µ–º—É", "–¥–æ–º—É"], pool: ["—Å–æ—Å–µ–¥–Ω–µ–º—É", "—Å–æ—Å–µ–¥–Ω–∏–π", "–¥–æ–º—É", "–¥–æ–º–∞"] },
        { id: 8, icon: "üë©‚Äç‚öïÔ∏èüè•", desc: "gute √Ñrztin", start: "–Ø –∏–¥—É –∫", ans: ["—Ö–æ—Ä–æ—à–µ–π", "–≤—Ä–∞—á–∏—Ö–µ"], pool: ["—Ö–æ—Ä–æ—à–µ–π", "—Ö–æ—Ä–æ—à—É—é", "–≤—Ä–∞—á–∏—Ö–µ", "–≤—Ä–∞—á–∏—Ö—É"] },
        { id: 9, icon: "üèõÔ∏è‚¨ú", desc: "wei√ües Geb√§ude", start: "–ú—ã –ø–æ–¥–æ—à–ª–∏ –∫", ans: ["–±–µ–ª–æ–º—É", "–∑–¥–∞–Ω–∏—é"], pool: ["–±–µ–ª–æ–º—É", "–±–µ–ª–æ–µ", "–∑–¥–∞–Ω–∏—é", "–∑–¥–∞–Ω–∏—è"] },
        { id: 10, icon: "üß∏üë¶", desc: "kleiner Junge", start: "–û–Ω–∞ –±–µ–∂–∏—Ç –∫", ans: ["–º–∞–ª–µ–Ω—å–∫–æ–º—É", "–º–∞–ª—å—á–∏–∫—É"], pool: ["–º–∞–ª–µ–Ω—å–∫–æ–º—É", "–º–∞–ª–µ–Ω—å–∫–∏–π", "–º–∞–ª—å—á–∏–∫—É", "–º–∞–ª—å—á–∏–∫–∞"] },
        { id: 11, icon: "üëµüç∞", desc: "geliebte Oma", start: "–í–Ω—É–∫ –±–µ–∂–∏—Ç –∫", ans: ["–ª—é–±–∏–º–æ–π", "–±–∞–±—É—à–∫–µ"], pool: ["–ª—é–±–∏–º–æ–π", "–ª—é–±–∏–º–∞—è", "–±–∞–±—É—à–∫–µ", "–±–∞–±—É—à–∫—É"] },
        { id: 12, icon: "üè¶üè¨", desc: "anderer Bank", start: "–û–Ω –∏–¥—ë—Ç –∫", ans: ["–¥—Ä—É–≥–æ–º—É", "–±–∞–Ω–∫—É"], pool: ["–¥—Ä—É–≥–æ–º—É", "–¥—Ä—É–≥–æ–π", "–±–∞–Ω–∫—É", "–±–∞–Ω–∫–∞"] },
        { id: 13, icon: "üë®‚Äçüíºüíº", desc: "fremder Jurist", start: "–ö–ª–∏–µ–Ω—Ç –ø—Ä–∏—à—ë–ª –∫", ans: ["—á—É–∂–æ–º—É", "—é—Ä–∏—Å—Ç—É"], pool: ["—á—É–∂–æ–º—É", "—á—É–∂–æ–π", "—é—Ä–∏—Å—Ç—É", "—é—Ä–∏—Å—Ç–∞"] },
        { id: 14, icon: "üë©‚Äçü¶∞üëó", desc: "j√ºngere Schwester", start: "–ë—Ä–∞—Ç –∏–¥—ë—Ç –∫", ans: ["–º–ª–∞–¥—à–µ–π", "—Å–µ—Å—Ç—Ä–µ"], pool: ["–º–ª–∞–¥—à–µ–π", "–º–ª–∞–¥—à—É—é", "—Å–µ—Å—Ç—Ä–µ", "—Å–µ—Å—Ç—Ä—É"] },
        { id: 15, icon: "ü™ü‚¨õ", desc: "gro√ües Fenster", start: "–ö–æ—à–∫–∞ –ø—Ä—ã–≥–Ω—É–ª–∞ –∫", ans: ["–±–æ–ª—å—à–æ–º—É", "–æ–∫–Ω—É"], pool: ["–±–æ–ª—å—à–æ–º—É", "–±–æ–ª—å—à–æ–µ", "–æ–∫–Ω—É", "–æ–∫–Ω–∞"] },
        { id: 16, icon: "üå≤üö∂", desc: "entfernter Verwandter", start: "–ú—ã –ø—Ä–∏–µ—Ö–∞–ª–∏ –∫", ans: ["–¥–∞–ª—å–Ω–µ–º—É", "—Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫—É"], pool: ["–¥–∞–ª—å–Ω–µ–º—É", "–¥–∞–ª—å–Ω–∏–π", "—Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫—É", "—Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫–∞"] },
        { id: 17, icon: "üêï‚¨õ", desc: "schwarzer Hund", start: "–†–µ–±—ë–Ω–æ–∫ –ø–æ–¥–æ—à—ë–ª –∫", ans: ["—á—ë—Ä–Ω–æ–º—É", "–ø—Å—É"], pool: ["—á—ë—Ä–Ω–æ–º—É", "—á—ë—Ä–Ω—ã–π", "–ø—Å—É", "–ø—Å–∞"] },
        { id: 18, icon: "üè®üèôÔ∏è", desc: "letztes Hotel", start: "–¢—É—Ä–∏—Å—Ç—ã –ø–æ–¥–æ—à–ª–∏ –∫", ans: ["–ø–æ—Å–ª–µ–¥–Ω–µ–º—É", "–æ—Ç–µ–ª—é"], pool: ["–ø–æ—Å–ª–µ–¥–Ω–µ–º—É", "–ø–æ—Å–ª–µ–¥–Ω–∏–π", "–æ—Ç–µ–ª—é", "–æ—Ç–µ–ª—è"] },
        { id: 19, icon: "üåäüèîÔ∏è", desc: "hoher Berg", start: "–ê–ª—å–ø–∏–Ω–∏—Å—Ç—ã –∏–¥—É—Ç –∫", ans: ["–≤—ã—Å–æ–∫–æ–π", "–≥–æ—Ä–µ"], pool: ["–≤—ã—Å–æ–∫–æ–π", "–≤—ã—Å–æ–∫–∞—è", "–≥–æ—Ä–µ", "–≥–æ—Ä—É"] },
        { id: 20, icon: "üöâüì¶", desc: "altes Postamt", start: "–ú–∞—à–∏–Ω–∞ –µ–¥–µ—Ç –∫", ans: ["—Å—Ç–∞—Ä–æ–π", "–ø–æ—á—Ç–µ"], pool: ["—Å—Ç–∞—Ä–æ–π", "—Å—Ç–∞—Ä–∞—è", "–ø–æ—á—Ç–µ", "–ø–æ—á—Ç—É"] }
    ];

    let userInputs = {};

    function shuffle(array) {
        return array.sort(() => Math.random() - 0.5);
    }

    function renderExercises() {
        const list = document.getElementById('exercise-list');
        list.innerHTML = '';
        
        exercises.forEach((ex) => {
            userInputs[ex.id] = [];
            const card = document.createElement('div');
            card.className = 'exercise-card';
            card.id = `ex-${ex.id}`;

            const poolShuffled = shuffle([...ex.pool]);

            card.innerHTML = `
                <span class="visual-prompt">${ex.icon}</span>
                <span class="target-desc">Ziel: ${ex.desc}</span>
                <div class="sentence-display">
                    <span>${ex.start}</span>
                    <span class="drop-slot" id="slot-${ex.id}-0" onclick="removeWord(${ex.id}, 0)"></span>
                    <span class="drop-slot" id="slot-${ex.id}-1" onclick="removeWord(${ex.id}, 1)"></span>
                </div>
                <div class="chip-pool" id="pool-${ex.id}">
                    ${poolShuffled.map((word, idx) => `<span class="chip" id="chip-${ex.id}-${idx}" onclick="addWord(${ex.id}, '${word}', ${idx})">${word}</span>`).join('')}
                </div>
                <div class="btn-group">
                    <button class="btn-reset" onclick="resetExercise(${ex.id})">Zur√ºcksetzen & Mischen</button>
                    <button class="btn-sol" onclick="showSolution(${ex.id})">L√∂sung anzeigen</button>
                </div>
            `;
            list.appendChild(card);
        });
    }

    window.addWord = function(exId, word, chipIdx) {
        const input = userInputs[exId];
        if (input.length >= 2) return;

        const chip = document.getElementById(`chip-${exId}-${chipIdx}`);
        chip.classList.add('used');
        
        input.push({ word, chipIdx });
        updateDisplay(exId);
    };

    window.removeWord = function(exId, slotIdx) {
        const input = userInputs[exId];
        if (slotIdx >= input.length) return;

        const removed = input.splice(slotIdx, 1)[0];
        const chip = document.getElementById(`chip-${exId}-${removed.chipIdx}`);
        chip.classList.remove('used');
        
        updateDisplay(exId);
    };

    function updateDisplay(exId) {
        const input = userInputs[exId];
        const ex = exercises.find(e => e.id === exId);
        
        for (let i = 0; i < 2; i++) {
            const slot = document.getElementById(`slot-${exId}-${i}`);
            slot.innerText = input[i] ? input[i].word : "";
            slot.className = "drop-slot";
        }

        if (input.length === 2) {
            const isCorrect = input[0].word === ex.ans[0] && input[1].word === ex.ans[1];
            for (let i = 0; i < 2; i++) {
                const slot = document.getElementById(`slot-${exId}-${i}`);
                slot.classList.add(isCorrect ? "correct" : "incorrect");
            }
        }
    }

    window.resetExercise = function(exId) {
        userInputs[exId] = [];
        const ex = exercises.find(e => e.id === exId);
        const pool = document.getElementById(`pool-${exId}`);
        const poolShuffled = shuffle([...ex.pool]);
        
        pool.innerHTML = poolShuffled.map((word, idx) => `<span class="chip" id="chip-${exId}-${idx}" onclick="addWord(${exId}, '${word}', ${idx})">${word}</span>`).join('');
        
        updateDisplay(exId);
    };

    window.showSolution = function(exId) {
        const ex = exercises.find(e => e.id === exId);
        userInputs[exId] = ex.ans.map(word => ({ word, chipIdx: -1 }));
        
        // Disable chips
        const chips = document.getElementById(`pool-${exId}`).querySelectorAll('.chip');
        chips.forEach(c => c.classList.add('used'));
        
        updateDisplay(exId);
        // Special case: force color
        for (let i = 0; i < 2; i++) {
            document.getElementById(`slot-${exId}-${i}`).className = "drop-slot correct";
        }
    };

    window.onload = renderExercises;
</script>

</body>
</html>