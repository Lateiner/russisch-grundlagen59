<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matrix-Puzzle: Russische Dativ-Endungen</title>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --success: #27ae60;
            --error: #e74c3c;
            --bg: #f4f7f6;
            --card: #ffffff;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background-color: var(--bg);
            color: var(--primary);
            margin: 0;
            padding: 10px;
            display: flex;
            justify-content: center;
        }

        .container {
            width: 100%;
            max-width: 850px;
            background: var(--card);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        header {
            text-align: center;
            border-bottom: 3px solid var(--secondary);
            margin-bottom: 25px;
            padding-bottom: 10px;
        }

        .instruction {
            background: #eef2f7;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 25px;
            border-left: 5px solid var(--secondary);
            font-size: 0.95rem;
        }

        .matrix-card {
            background: #fff;
            border: 2px solid #eaeeef;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 40px;
        }

        .matrix-title {
            font-weight: bold;
            color: var(--secondary);
            margin-bottom: 15px;
            display: block;
            font-size: 1.1rem;
        }

        .matrix-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
            table-layout: fixed;
        }

        .matrix-table th, .matrix-table td {
            border: 1px solid #bdc3c7;
            padding: 12px 5px;
            text-align: center;
            height: 55px;
        }

        .matrix-table th {
            background-color: #f8f9fa;
            font-size: 0.8rem;
            text-transform: uppercase;
        }

        .stem-label {
            font-weight: bold;
            background-color: #f8f9fa;
            font-size: 0.95rem;
            color: var(--primary);
        }

        .slot {
            background-color: #fff;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: bold;
            font-size: 1.2rem;
            color: var(--secondary);
        }

        .slot:hover { background-color: #f0f8ff; }
        .slot.correct { background-color: #d4edda; color: #155724; border: 2px solid var(--success); }
        .slot.incorrect { background-color: #f8d7da; color: #721c24; border: 2px solid var(--error); }

        .chip-pool {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            min-height: 50px;
        }

        .chip {
            padding: 10px 18px;
            background: var(--primary);
            color: white;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.1rem;
            user-select: none;
            transition: all 0.2s;
        }

        .chip.selected { background: var(--secondary); transform: translateY(-3px); box-shadow: 0 4px 8px rgba(0,0,0,0.2); }

        .btn-group {
            display: flex;
            gap: 10px;
        }

        button {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            transition: opacity 0.2s;
        }

        .btn-reset { background: #7f8c8d; color: white; }
        .btn-sol { background: var(--secondary); color: white; }
        button:hover { opacity: 0.9; }

        @media (max-width: 600px) {
            .container { padding: 15px; }
            .matrix-table th { font-size: 0.65rem; }
            .stem-label { font-size: 0.8rem; }
            .matrix-card { padding: 15px; }
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Russisch-Assistent</h1>
        <h2>Tabellen-Puzzle: Dativ-Endungen</h2>
    </header>

    <div class="instruction">
        <strong>Anleitung:</strong> Vervollständige die Matrix mit den korrekten Endungen.
        <br>1. Klicke auf eine <strong>Endung</strong> (unten), um sie auszuwählen.
        <br>2. Klicke auf ein <strong>„?“</strong> in der Tabelle, um sie einzusetzen.
    </div>

    <div id="exercise-container"></div>
</div>

<script>
    const taskData = [
        { id: 1, stem: "НОВ- (neu)", mn: "-ому", f: "-ой" },
        { id: 2, stem: "МОЛОД- (jung)", mn: "-ому", f: "-ой" },
        { id: 3, stem: "ХОРОШ- (gut)", mn: "-ему", f: "-ей" },
        { id: 4, stem: "СИН- (blau)", mn: "-ему", f: "-ей" },
        { id: 5, stem: "ВЫСОК- (groß)", mn: "-ому", f: "-ой" },
        { id: 6, stem: "ЛУЧШ- (bester)", mn: "-ему", f: "-ей" },
        { id: 7, stem: "СТРОГ- (streng)", mn: "-ому", f: "-ой" },
        { id: 8, stem: "ДАЛЬН- (fern)", mn: "-ему", f: "-ей" },
        { id: 9, stem: "ПЛОХ- (schlecht)", mn: "-ому", f: "-ой" },
        { id: 10, stem: "МЛАДШ- (jünger)", mn: "-ему", f: "-ей" },
        { id: 11, stem: "СТАР- (alt)", mn: "-ому", f: "-ой" },
        { id: 12, stem: "СОСЕДН- (benachbart)", mn: "-ему", f: "-ей" },
        { id: 13, stem: "ДРУГ- (anderer)", mn: "-ому", f: "-ой" },
        { id: 14, stem: "ПОСЛЕДН- (letzter)", mn: "-ему", f: "-ей" },
        { id: 15, stem: "ДОБР- (gütig)", mn: "-ому", f: "-ой" },
        { id: 16, stem: "СТАРШ- (älter)", mn: "-ему", f: "-ей" },
        { id: 17, stem: "БЕЛ- (weiß)", mn: "-ому", f: "-ой" },
        { id: 18, stem: "ЛЕТН- (sommerlich)", mn: "-ему", f: "-ей" },
        { id: 19, stem: "КРАСИВ- (schön)", mn: "-ому", f: "-ой" },
        { id: 20, stem: "ЗИМН- (winterlich)", mn: "-ему", f: "-ей" }
    ];

    let currentSelectedEnding = null;
    const endings = ["-ому", "-ему", "-ой", "-ей"];

    function shuffle(array) {
        return array.sort(() => Math.random() - 0.5);
    }

    function renderTask(id) {
        const data = taskData.find(t => t.id === id);
        const block = document.createElement('div');
        block.className = 'matrix-card';
        block.id = `block-${id}`;
        
        const shuffledEndings = shuffle([...endings]);

        block.innerHTML = `
            <span class="matrix-title">Aufgabe ${id}</span>
            <table class="matrix-table">
                <tr>
                    <th>Stamm</th>
                    <th>Mask. / Neutr.</th>
                    <th>Femininum</th>
                </tr>
                <tr>
                    <td class="stem-label">${data.stem}</td>
                    <td class="slot" id="slot-${id}-mn" onclick="handlePlace(${id}, 'mn')">?</td>
                    <td class="slot" id="slot-${id}-f" onclick="handlePlace(${id}, 'f')">?</td>
                </tr>
            </table>
            <div class="chip-pool" id="pool-${id}">
                ${shuffledEndings.map(e => `<div class="chip" onclick="handleSelect(this, '${e}')">${e}</div>`).join('')}
            </div>
            <div class="btn-group">
                <button class="btn-reset" onclick="resetTask(${id})">Zurücksetzen & mischen</button>
                <button class="btn-sol" onclick="showSolution(${id})">Lösung anzeigen</button>
            </div>
        `;
        return block;
    }

    window.handleSelect = function(el, ending) {
        const pool = el.parentElement;
        pool.querySelectorAll('.chip').forEach(c => c.classList.remove('selected'));
        el.classList.add('selected');
        currentSelectedEnding = ending;
    };

    window.handlePlace = function(taskId, type) {
        if (!currentSelectedEnding) return;
        
        const data = taskData.find(t => t.id === taskId);
        const slot = document.getElementById(`slot-${taskId}-${type}`);
        const correct = (type === 'mn') ? data.mn : data.f;

        slot.innerText = currentSelectedEnding;
        slot.classList.remove('correct', 'incorrect');

        if (currentSelectedEnding === correct) {
            slot.classList.add('correct');
        } else {
            slot.classList.add('incorrect');
        }
    };

    window.resetTask = function(id) {
        const container = document.getElementById('exercise-container');
        const oldBlock = document.getElementById(`block-${id}`);
        const newBlock = renderTask(id);
        container.replaceChild(newBlock, oldBlock);
        currentSelectedEnding = null;
    };

    window.showSolution = function(id) {
        const data = taskData.find(t => t.id === id);
        const slotMN = document.getElementById(`slot-${id}-mn`);
        const slotF = document.getElementById(`slot-${id}-f`);

        slotMN.innerText = data.mn;
        slotMN.className = 'slot correct';
        slotF.innerText = data.f;
        slotF.className = 'slot correct';
    };

    function init() {
        const container = document.getElementById('exercise-container');
        taskData.forEach(task => {
            container.appendChild(renderTask(task.id));
        });
    }

    window.onload = init;
</script>

</body>
</html>